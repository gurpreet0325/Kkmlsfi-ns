<div class="container-fluid">
    <div class="mt-3">
        <h3 class="float-start me-2">Attendance</h3>
        <a class="btn btn-outline-primary border-0" (click)="onAddAttendance()"
            data-toggle="tooltip" title="New Attendance">
            <i class="bi bi-pencil-square"></i>
        </a>
    </div>

    @if (attendances$ | async; as attendances) {
        <table class="table table-hover mt-3">
            <thead>
                <tr>
                    <th>Attendance Date</th>
                    <th>Attendees</th>
                    <th class="text-end"></th>
                </tr>
            </thead>
            <tbody>
                @for (attendance of attendances; track attendance.attendanceId) {
                    <tr>
                        <td>
                            {{attendance.attendanceDate | date:'longDate'}}
                            @if (!attendance.isFinalized) {
                                <a class="btn btn-outline-primary border-0 ms-2" [routerLink]="['/attendance/members',attendance.attendanceId]"
                                    data-toggle="tooltip" title="Check in Members">
                                    <i class="bi bi-person-check-fill"></i>
                                </a> 
                            } @else {
                                <a class="btn btn-outline-success border-0 ms-2" [routerLink]="['/attendance/members',attendance.attendanceId]"
                                    data-toggle="tooltip" title="View Members">
                                    <i class="bi bi-patch-check-fill"></i>
                                </a> 
                            }
                        </td>
                        <td>{{attendance.attendedMembersCount}}</td>
                        <td class="text-end">
                            @if (!attendance.isFinalized) {
                                <a (click)="onDeleteAttendance(attendance)" class="btn btn-outline-danger border-0" 
                                    data-toggle="tooltip" title="Delete">
                                    <i class="bi bi-trash-fill"></i>
                                </a>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    } @else {
        <p class="center mt-3">No records.</p>
    }
    
    
</div>