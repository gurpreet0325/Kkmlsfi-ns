<div class="backdrop" (click)="onCancel()"></div>
<dialog class="dialog" open>
    <h3>{{mode}} Member</h3>

    <form (submit)="onFormSubmit()" #memberForm="ngForm">
        <div class="mt-2">
            <div class="mt-3">
                <label class="form-label" for="firstName">First name</label>
                <input type="text" id="firstName" class="form-control" name="firstName" [(ngModel)]="model.firstName" required #firstName="ngModel">
                <app-input-validation-message [ngModel]="firstName" errorMessage="First name is required."/>
            </div>

            <div class="mt-3">
                <label class="form-label" for="middleName">Middle name</label>
                <input type="text" id="middleName" class="form-control" name="middleName" [(ngModel)]="model.middleName">
            </div>

            <div class="mt-3">
                <label class="form-label" for="lastName">Last name</label>
                <input type="text" id="lastName" class="form-control" name="lastName" [(ngModel)]="model.lastName" required #lastName="ngModel">
                <app-input-validation-message [ngModel]="lastName" errorMessage="Last name is required."/>
            </div>

            <div class="mt-3">
                <label class="form-label" for="dateOfBirth">Date of birth</label>
                <input type="date" id="dateOfBirth" class="form-control" name="dateOfBirth" [(ngModel)]="model.dateOfBirth" required #dateOfBirth="ngModel">
                <app-input-validation-message [ngModel]="dateOfBirth" errorMessage="Date of birth is required."/>
            </div>

            <div class="mt-3">
                <label class="form-label" for="city">City</label>
                <input type="text" id="city" class="form-control" name="city" [(ngModel)]="model.city" required #city="ngModel">
                <app-input-validation-message [ngModel]="city" errorMessage="City is required."/>
            </div>

            @if (!isNew()) {
                <div class="mt-3">
                    <button type="button" class="btn btn-outline-success" (click)="openImageSelector()">Upload Display Picture</button>
                </div>
                
                @if (isImageSelectorVisible) {
                    <div class="container-modal">
                        <button type="button" class="btn btn-danger" style="position: fixed; top: 10px; right: 10px;" (click)="closeImageSelector()">X</button>
                        <app-image-selector [member]="this.model"></app-image-selector>
                    </div>
                }
            }

            <div class="mt-3 d-flex justify-content-end gap-1">
                <button type="submit" class="btn btn-primary" [disabled]="memberForm.invalid">Save</button>
                <button type="button" class="btn btn-outline-primary" (click)="onCancel()">Cancel</button>
            </div>
        </div>
    </form>

    
</dialog>
